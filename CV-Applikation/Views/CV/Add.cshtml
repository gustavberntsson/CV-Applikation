@{
    ViewData["Title"] = "Lägg till";
}
@model CV
<form asp-action="Add" method="post">
    <label>CV Namn:</label>
    <input asp-for="CVName" />
    <br />

    <h3>Språk</h3>
    <div id="languagesContainer">
        @for (int i = 0; i < Model.Languages.Count; i++)
        {
            <div>
                <label for="Languages[@i].LanguageName">Språk:</label>
                <input asp-for="Languages[@i].LanguageName" id="Languages[@i].LanguageName" />
                <br />
                <label for="Languages[@i].Level">Nivå (1-5):</label>
                <input asp-for="Languages[@i].Level" id="Languages[@i].Level" type="number" min="1" max="5" />
                <br />
            </div>
        }
    </div>
    <button type="button" id="addLanguage">Lägg till nytt språk</button>

    <!-- Utbildning -->
    <h3>Utbildning</h3>
    <div id="educationsContainer">
        @for (int i = 0; i < Model.Educations.Count; i++)
        {
            <div>
                <label for="Educations[@i].School">Skola:</label>
                <input asp-for="Educations[@i].School" id="Educations[@i].School" />
                <br />

                <label for="Educations[@i].Degree">Examen:</label>
                <input asp-for="Educations[@i].Degree" id="Educations[@i].Degree" />
                <br />

                <label for="Educations[@i].FieldOfStudy">Ämnesområde:</label>
                <input asp-for="Educations[@i].FieldOfStudy" id="Educations[@i].FieldOfStudy" />
                <br />

                <label for="Educations[@i].StartDate">Startdatum:</label>
                <input asp-for="Educations[@i].StartDate" id="Educations[@i].StartDate" />
                <br />
                <label for="Educations[@i].EndDate">Slutdatum:</label>
                <input asp-for="Educations[@i].EndDate" id="Educations[@i].EndDate" />
                <br />
            </div>
        }
    </div>
    <button type="button" id="addEducation">Lägg till ny utbildning</button>

    <!-- Arbetslivserfarenhet -->
    <h3>Arbetslivserfarenhet</h3>
    <div id="workExperiencesContainer">
        @for (int i = 0; i < Model.WorkExperiences.Count; i++)
        {
            <div>
                <label for="WorkExperiences[@i].CompanyName">Företag:</label>
                <input asp-for="WorkExperiences[@i].CompanyName" id="WorkExperiences[@i].CompanyName" />
                <br />

                <label for="WorkExperiences[@i].Position">Position:</label>
                <input asp-for="WorkExperiences[@i].Position" id="WorkExperiences[@i].Position" />
                <br />

                <label for="WorkExperiences[@i].Description">Beskrivning:</label>
                <input asp-for="WorkExperiences[@i].Description" id="WorkExperiences[@i].Description" />
                <br />
                <label for="WorkExperiences[@i].StartDate">Startdatum:</label>
                <input asp-for="WorkExperiences[@i].StartDate" id="WorkExperiences[@i].StartDate" />
                <br />
                <label for="WorkExperiences[@i].EndDate">Slutdatum:</label>
                <input asp-for="WorkExperiences[@i].EndDate" id="WorkExperiences[@i].EndDate" />
                <br />
            </div>
        }
    </div>
    <button type="button" id="addWorkExperience">Lägg till ny arbetslivserfarenhet</button>

    <!-- Färdigheter -->
    <h3>Färdigheter</h3>
    <div id="skillsContainer">
        @for (int i = 0; i < Model.Skills.Count; i++)
        {
            <div>
                <label for="Skills[@i].SkillName">Färdighet:</label>
                <input asp-for="Skills[@i].SkillName" id="Skills[@i].SkillName" />
                <br />
            </div>
        }
    </div>
    <button type="button" id="addSkill">Lägg till ny färdighet</button>

    <br />
    <div class="form-group">
        <label for="IsPrivate">Synlighet</label>
        <select class="form-control" id="IsPrivate" name="IsPrivate">
            <option value="false">Offentligt</option>
            <option value="true">Privat</option>
        </select>
    </div>
    <br />
    <button type="submit">Lägg till CV</button>
</form>

<script>
    // Dynamiskt lägga till nya språk
    document.getElementById("addLanguage").addEventListener("click", function () {
        let languagesDiv = document.getElementById("languagesContainer");
        let index = languagesDiv.children.length;
        let newLanguage = `
        <div>
            <label for="Languages[${index}].LanguageName">Språk:</label>
            <input name="Languages[${index}].LanguageName" id="Languages[${index}].LanguageName" />
            <br />
            <label for="Languages[${index}].Level">Nivå (1-5):</label>
            <input type="number" min="1" max="5" name="Languages[${index}].Level" id="Languages[${index}].Level" />
            <br />
        </div>`;
        languagesDiv.innerHTML += newLanguage;
    });

    // Dynamiskt lägga till ny utbildning
        document.getElementById("addEducation").addEventListener("click", function () {
        let educationsDiv = document.getElementById("educationsContainer");
        let index = educationsDiv.children.length;
        let newEducation = `
        <div>
            <label for="Educations[${index}].School">Skola:</label>
            <input name="Educations[${index}].School" id="Educations[${index}].School" />
            <br />
            <label for="Educations[${index}].Degree">Examen:</label>
            <input name="Educations[${index}].Degree" id="Educations[${index}].Degree" />
            <br />
            <label for="Educations[${index}].FieldOfStudy">Ämnesområde:</label>
            <input name="Educations[${index}].FieldOfStudy" id="Educations[${index}].FieldOfStudy" />
            <br />
            <label for="Educations[${index}].StartDate">Startdatum:</label>
            <input type="date" name="Educations[${index}].StartDate" id="Educations[${index}].StartDate" />
            <br />
            <label for="Educations[${index}].EndDate">Slutdatum:</label>
            <input type="date" name="Educations[${index}].EndDate" id="Educations[${index}].EndDate" />
            <br />
        </div>`;
        educationsDiv.innerHTML += newEducation;
    });

    document.getElementById("addWorkExperience").addEventListener("click", function () {
        let workExperiencesDiv = document.getElementById("workExperiencesContainer");
        let index = workExperiencesDiv.children.length;
        let newWorkExperience = `
        <div>
            <label for="WorkExperiences[${index}].CompanyName">Företag:</label>
            <input name="WorkExperiences[${index}].CompanyName" id="WorkExperiences[${index}].CompanyName" />
            <br />
            <label for="WorkExperiences[${index}].Position">Position:</label>
            <input name="WorkExperiences[${index}].Position" id="WorkExperiences[${index}].Position" />
            <br />
            <label for="WorkExperiences[${index}].Description">Beskrivning:</label>
            <input name="WorkExperiences[${index}].Description" id="WorkExperiences[${index}].Description" />
            <br />
            <label for="WorkExperiences[${index}].StartDate">Startdatum:</label>
            <input type="date" name="WorkExperiences[${index}].StartDate" id="WorkExperiences[${index}].StartDate" />
            <br />
            <label for="WorkExperiences[${index}].EndDate">Slutdatum:</label>
            <input type="date" name="WorkExperiences[${index}].EndDate" id="WorkExperiences[${index}].EndDate" />
            <br />
        </div>`;
        workExperiencesDiv.innerHTML += newWorkExperience;
    });

    // Dynamiskt lägga till nya färdigheter
    document.getElementById("addSkill").addEventListener("click", function () {
        let skillsDiv = document.getElementById("skillsContainer");
        let index = skillsDiv.children.length;

        let newSkill = `
        <div>
            <label for="Skills[${index}].SkillName">Färdighet:</label>
            <input name="Skills[${index}].SkillName" id="Skills[${index}].SkillName" />
            <br />
        </div>`;
        skillsDiv.innerHTML += newSkill;
    });
</script>

<a asp-controller="Home" asp-action="index"> Hem</a>