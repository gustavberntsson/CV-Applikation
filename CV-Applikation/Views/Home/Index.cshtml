@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <h2> Mr Pizza</h2>
   <h2>Mojo jojo gets beaten up by the powerpuff girls</h2>
   <h3>this website is very trustworthy</h3>
	@if (User.Identity.IsAuthenticated){
    <img width="400" height="400" src="https://static1.srcdn.com/wordpress/wp-content/uploads/2018/03/10.-Destroying-Mojo.jpg" />
     <form asp-controller="Account" asp-action="Logout" method="post" style="margin-top: 20px;">
     <button type="submit" class="btn btn-danger">Logout</button>
     </form>
    }
else
{
    <a asp-controller="Account" asp-action="LogIn" class="btn btn-primary" style="margin-top: 20px;">Logga in</a>
}    

 
    <p>Learn about <a href="https://learn.microsoft.com/aspnet/core">building Web apps with or without ASP.NET Core</a>.</p>
</div>
@model HomeViewModel

<h1>Välkommen</h1>
<h2>Urval av CVs:</h2>

<ul>
    @foreach (var cv in Model.CVs)
    {
        <li>
            <a asp-controller="Account" asp-action="Profile" asp-route-id="@cv.UserId">
                <strong>CV för:</strong> @(cv.User?.UserName ?? "Okänd användare")
            </a>
            <br />
            <p><strong>Namn:</strong> @cv.CVName</p>
            <p><strong>UserId för detta CV:</strong> @cv.UserId</p>
            <h4>Utbildning:</h4>
            @if (cv.Educations != null && cv.Educations.Any())
            {
                <ul>
                    @foreach (var education in cv.Educations)
                    {
                        <li>
                            <strong>Skola:</strong> @education.School<br />
                            <strong>Examen:</strong> @education.Degree<br />
                            <strong>Slutdatum:</strong> @education.EndDate
                        </li>
                    }
                </ul>
            }
            else
            {
                <p>Ingen utbildning tillagd.</p>
            }

            <h4>Språk:</h4>
            @if (cv.Languages != null && cv.Languages.Any())
            {
                <ul>
                    @foreach (var language in cv.Languages)
                    {
                        <li>
                            <strong>Språk:</strong> @language.LanguageName<br />
                        </li>
                    }
                </ul>
            }
            else
            {
                <p>Inga språk tillagda.</p>
            }

            <h4>Färdighet:</h4>
            @if (cv.Skills != null && cv.Skills.Any())
            {
                <ul>
                    @foreach (var skill in cv.Skills)
                    {
                        <li>
                            <strong>Färdighet:</strong> @skill.SkillName<br />
                        </li>
                    }
                </ul>
            }
            else
            {
                <p>Ingen färdighet tillagd.</p>
            }
        </li>
    }
</ul>


<h2>Senaste projektet:</h2>
@if (Model.ProjectLatest != null)
{
    <h3>@Model.ProjectLatest.Title</h3>
    <p>@Model.ProjectLatest.Description</p>
    <p>Skapad: @Model.ProjectLatest.CreatedAt.ToLocalTime().ToString("yyyy-MM-dd HH:mm:ss")</p>

    @if (!Model.IsUserInProject)
    {
        <form asp-action="JoinProject" asp-controller="Project" method="post">
            <input type="hidden" name="projectId" value="@Model.ProjectLatest.ProjectId" />
            <button type="submit" class="btn btn-primary">Gå med i projektet</button>
        </form>
    }
    else
    {
        <p class="text-success">Du är redan med i detta projekt.</p>
    }
}
else
{
    <p>Inga projekt skapade ännu.</p>
}

<p> <a asp-controller="CV" asp-action="Add"> Lägg till CV</a> <p/>

<p> <a asp-controller="Project" asp-action="AddProject"> Lägg till Projekt</a> <p/>
<p> <a asp-controller="Project" asp-action="ProjectList"> Visa Projekt</a> <p/>